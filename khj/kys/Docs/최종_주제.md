# 프로젝트 후보 아이디어 상세 고려사항

---

## 리뷰 작성 전 문제 감지 모델

### 0. 가상의 스토리텔링 설정

"저희 팀은 매출을 발생시키면서도 뒤로는 막대한 CS 비용과 고객 이탈을 유발하는 **'유의 판매자'**에 주목했습니다. 이들을 데이터로 조기에 식별하고 관리함으로써, 고객에게는 **'실패 없는 쇼핑'**을 약속하고 기업에게는 **'새어 나가는 비용'**을 막아, Olist의 이익 구조를 더욱 탄탄하게 만들겠습니다."

### 1. 타겟 변수 정의

#### 1.1 리뷰 점수 분류 기준

- **이진 분류**

  - 긍정(1) vs 부정(0)
  - 기준점 선택:
    - **4점 이상 = 긍정** (일반적)
    - **3점 이하 = 부정**
  - **EDA 결과**: 리뷰 분포
    - 5점: 57.8% (높은 비중)
    - 4점: 19.3%
    - 1-3점: 22.9% (부정 리뷰)
  - **고려사항**: 클래스 불균형 문제 -> 언더샘플링 또는 가중치 조정 필요

#### 1.2 리뷰 데이터 품질 이슈

- **텍스트 없는 리뷰 처리**

  - 현재: review_comment_title 88.3% 결측, review_comment_message 58.7% 결측
  - 점수만 있는 리뷰의 신뢰도
  - 처리 방법:
    - 텍스트 있는 리뷰만 사용
    - 텍스트 없는 리뷰는 별도 모델 또는 기본값 사용
    - 텍스트 존재 여부를 피처로 추가

### 2. 피처 엔지니어링

#### 2.1 배송 관련 피처 EDA 결과: 높은 중요도

##### 2.1.1 배송 시간 피처

| 피처                  | 계산 방식                 | 의미                     |
| --------------------- | ------------------------- | ------------------------ |
| `total_delivery_days` | 주문 -> 배송 완료         | 고객 체감 전체 대기 시간 |
| `processing_days`     | 주문 승인 -> 운송사 인수  | 판매자 책임 구간         |
| `shipping_days`       | 운송사 인수 -> 배송 완료  | 물류사 책임 구간         |
| `delivery_delay`      | 실제 배송일 - 예상 배송일 | 지연/조기 도착           |

**EDA 결과:**

- 동일 주: 평균 **7.5일** (처리 2.3일 + 배송 4.3일)
- 다른 주: 평균 **14.6일** (처리 2.4일 + 배송 11.3일)
- **물류 배송이 전체의 70-85% 차지**
- **판매자 처리 시간은 지역과 무관 (~2일)**
- 대부분 예상보다 **10-14일 조기 도착** (Olist 보수적 예상일 설정)

##### 2.1.2 동일 지역 배송 피처

| 피처         | 의미                         |
| ------------ | ---------------------------- |
| `same_state` | 판매자-구매자 동일 주 여부   |
| `same_city`  | 판매자-구매자 동일 도시 여부 |

**EDA 결과:**

- 동일 주 배송률: **36.2%**, 동일 도시 배송률: **5.2%**
- 동일 주 배송 시 전체 배송 시간 **7.1일 단축**
- 물류 배송만 7.0일 단축 (판매자 처리는 0.1일 차이)

##### 2.1.3 판매자 배송 성과 피처

| 피처                                  | 의미                                |
| ------------------------------------- | ----------------------------------- |
| `seller_avg_processing`               | 판매자별 평균 처리 시간             |
| `seller_shipment_delay_ratio`         | 판매자별 출고 지연률                |
| `seller_delivery_diff_from_state_avg` | 주 평균 대비 판매자 배송일 차이     |
| `seller_is_slow_in_state`             | 주 평균보다 느린 판매자 여부 (이진) |

**EDA 결과:**

- 평균 출고 지연률: **12.1%**, 품질 우수 판매자: **0.7%**
- 주 평균보다 3일 이상 느린 판매자: 47명 (7.1%)
- -> **동일 지역에서도 느린 판매자 식별 가능**

**느린 판매자의 카테고리 분석** (47명, 1,809건 / 동일 주 배송 전체: ~39,866건):

| 카테고리              | 느린 판매자 비율 | 동일 주 배송 전체 | 차이       |
| --------------------- | ---------------- | ----------------- | ---------- |
| **office_furniture**  | **29.0%**        | 1.6%              | **+27.4%** |
| baby                  | 8.9%             | 2.6%              | +6.3%      |
| computers_accessories | 10.2%            | 5.2%              | +5.0%      |
| pet_shop              | 6.5%             | 1.7%              | +4.8%      |
| home_construction     | 4.2%             | 0.6%              | +3.6%      |
| health_beauty         | 1.8%             | 8.8%              | **-7.0%**  |

- **핵심 발견**: `office_furniture`(사무용 가구)가 느린 판매자의 29%를 차지
  - 처리 시간 평균 9.7일 (전체 평균 대비 4배 이상)
- -> **카테고리가 아닌 특정 판매자의 내부 프로세스 문제**로 판단
  ![차트3](Chart/느린 판매자에서 대표되는 카테고리.png)
- -> `is_office_furniture` 또는 판매자별 평균 처리 시간 피처 고려

##### 2.1.4 지역/카테고리별 배송 피처

| 피처                         | 의미                         |
| ---------------------------- | ---------------------------- |
| `state_avg_delivery`         | 주별 평균 배송일             |
| `category_avg_delivery`      | 카테고리별 평균 배송일       |
| `category_same_state_effect` | 카테고리별 동일 주 배송 효과 |

**EDA 결과:**

- 주별 차이: MT(11.3일), BA(10.7일), SP(7.5일) 등
- 빠른 카테고리: housewares (~10일), 느린 카테고리: garden_tools (~13일)
- 모든 카테고리에서 동일 주 배송이 약 **5-7일 빠름**

##### 2.1.5 핵심 인사이트

| 발견                       | 의미                             |
| -------------------------- | -------------------------------- |
| 물류 배송 70-85% 차지      | **배송 속도는 물류 의존적**      |
| 판매자 처리 ~2일 일정      | **느린 판매자는 순수 내부 문제** |
| 예상보다 10-14일 조기 도착 | **Olist의 보수적 예상일 설정**   |

#### 2.2 판매 구조 피처 EDA 결과: 의미 있는 영향 발견

- **판매 복잡도** EDA 검증 완료

  | 피처             | 의미               |
  | ---------------- | ------------------ |
  | `item_count`     | 주문당 상품 수     |
  | `category_count` | 주문당 카테고리 수 |
  | `total_price`    | 주문 총액          |
  | `seller_count`   | 주문당 판매자 수   |

  **EDA 결과:**

  - 1개 상품 주문: **90.1%**, 1명 판매자: **98.7%**
  - **상품 수 증가 시 리뷰 점수 급격히 감소:**

  | 상품 수 | 평균 점수 | 부정 리뷰 비율 | 건수         |
  | ------- | --------- | -------------- | ------------ |
  | 1개     | 4.16점    | 12.7%          | **88,699건** |
  | 2개     | 3.65점    | 26.3%          | 7,496건      |
  | 3개     | 3.51점    | 29.9%          | 1,311건      |
  | 4-5개   | 3.35점    | 34.9%          | 707건        |
  | 6개+    | 3.22점    | **36.9%**      | 252건        |

  - **금액 높을수록 부정 리뷰 증가:**

  | 금액 구간   | 평균 점수 | 부정 리뷰 비율 |
  | ----------- | --------- | -------------- |
  | Q1 (저가)   | 4.17점    | 12.1%          |
  | Q2 (중저가) | 4.13점    | 13.4%          |
  | Q3 (중고가) | 4.11점    | 14.0%          |
  | Q4 (고가)   | 4.00점    | **17.2%**      |

  - **카테고리 수 증가 시 리뷰 점수 급락:**

  | 카테고리 수 | 평균 점수  | 부정 리뷰 비율 | 건수         |
  | ----------- | ---------- | -------------- | ------------ |
  | 1개         | 4.11점     | 13.9%          | **96,345건** |
  | 2개         | **3.10점** | **40.8%**      | 716건        |
  | 3개         | **2.12점** | **68.8%**      | 16건         |

  - 1개 카테고리 주문: **97.8%** (대부분 단일 카테고리)
  - 금액-리뷰 상관계수: **-0.04**, 카테고리 수-리뷰 상관계수: **-0.03**

  **주의: 데이터 불균형 문제**

  - 상품 수 2개 이상: 약 10% (9,765건) → 경향성 신뢰 가능
  - 카테고리 수 2개 이상: 약 0.7% (732건) → 통계적 신뢰도 제한
  - 특히 카테고리 3개는 16건뿐 → 68.8%라는 수치는 참고용

~~#### 2.3 결제 수단 피처~~

#### 2.4 제품 정보 피처 EDA 결과: 보통 중요도

- **제품 상세 정보 존재 여부** EDA 검증 완료 (정보 유무가 핵심!)

  - `has_photos`: product_photos_qty > 0
  - `has_description`: product_description_lenght > 0
  - **EDA 결과:**
    - 사진 0장: 평균 3.84점, 부정 리뷰 **22.1%**
    - 사진 1장+: 평균 4.0~4.1점, 부정 리뷰 14~17%
    - 설명 없음: 평균 3.84점, 부정 리뷰 **22.1%**
    - 설명 있음: 평균 4.0~4.06점, 부정 리뷰 15~17%
    - **-> 정보 유무만으로 0.15~0.2점 차이**

- **제품 정보 품질 (연속형)** EDA 결과: 약한 영향

  - `product_photos_qty`: 사진 수
  - `product_description_lenght`: 설명 길이
  - **EDA 결과:**
    - 상관계수: 사진 0.02, 설명 0.01 (매우 약함)
    - 사진 1장 -> 5장+: 점수 0.1점 상승 (한계 효과)
    - **-> 정보량 증가 효과는 미미, 사진 3장 이상부터 효과 거의 없음**

- **카테고리별 제품 정보 중요도** EDA 검증 완료
  - 사진이 중요한 카테고리: art, computers, furniture (시각적 제품)
  - 사진이 덜 중요한 카테고리: food, electronics (스펙/브랜드 중심)
  - **-> 카테고리별로 정보 품질 영향도 다름**

#### 2.5 시간 관련 피처 EDA 결과: 특수 기간만 유의미

- **요일/시간대** EDA 검증 완료

  | 피처          | 의미             |
  | ------------- | ---------------- |
  | `day_of_week` | 요일 (0=월~6=일) |
  | `hour`        | 주문 시간        |
  | `is_weekend`  | 주말 여부        |

  **EDA 결과:**

  - 평일 평균: 4.087점, 주말 평균: 4.084점 (차이: **-0.004점**)
  - 요일별 차이: 금(4.033) ~ 수(4.114), 약 0.08점 차이
  - 시간대별 차이: 새벽(4.012) ~ 오후(4.087), 약 0.07점 차이
  - **-> 통계적으로 의미 없음**

- **월/계절성** EDA 검증 완료 -> 약한 영향

  - `month`: 월 (1-12)
  - **EDA 결과:**
    - 2-3월: 낮음 (3.8대), 6-8월: 높음 (4.2대)
    - 연말(12월) 평균: 4.020점 vs 일반: 4.090점 (차이: **-0.07점**)

- **특수 기간** EDA 검증 완료 -> **중요!**

  | 피처              | 의미                       |
  | ----------------- | -------------------------- |
  | `is_black_friday` | 블랙프라이데이 (11월 하순) |
  | `is_christmas`    | 크리스마스 (12월 중순~)    |

  **EDA 결과:**

  | 기간               | 평균 점수   | 부정 리뷰 비율 |
  | ------------------ | ----------- | -------------- |
  | 일반 기간          | 4.099점     | 14.4%          |
  | **블랙프라이데이** | **3.791점** | **21.7%**      |
  | 크리스마스         | 4.125점     | 13.9%          |

  - **블랙프라이데이 시즌에 리뷰 점수 급락!** (일반 대비 -0.3점)
  - 주문량 폭증 -> 배송 지연 -> 부정 리뷰 증가 추정

- **핵심 인사이트**
  - 요일/시간대: 무의미
  - **블랙프라이데이**: 가장 큰 영향, 부정 리뷰 21.7%로 급증
  - 크리스마스: 오히려 일반 기간보다 좋음 (배송 지연 완화?)

---

### EDA 기반 피처 우선순위 (최종)

| 우선순위 | 피처                          | EDA 결과                                  | 활용        |
| -------- | ----------------------------- | ----------------------------------------- | ----------- |
|          | `same_state`                  | 동일 주 배송 시 7.1일 단축                | 필수        |
|          | `shipping_days`               | 물류 배송이 70-85% 차지                   | 필수        |
|          | `item_count`                  | 상품 수 증가 시 점수 급락 (4.16->3.22)    | 필수        |
|          | `is_black_friday`             | 블랙프라이데이 부정 리뷰 21.7%            | 필수        |
|          | `is_office_furniture`         | 느린 판매자의 29% 차지 (처리 시간 9.7일)  | 권장 (신규) |
|          | `category_count`              | 카테고리 수 증가 시 점수 급락 (소수 샘플) | 권장 (주의) |
|          | `seller_shipment_delay_ratio` | 출고 지연률 평균 12.1%                    | 권장        |
|          | `has_photos`                  | 사진 유무로 0.15점 차이                   | 권장        |
|          | `total_price`                 | 고가 주문 시 부정 리뷰 17.2%              | 선택        |
|          | `has_description`             | 설명 유무로 약한 영향                     | 선택        |
|          | `is_weekend`                  | 평일/주말 차이 0.004점                    | 제외        |
|          | `hour`                        | 시간대별 차이 무의미                      | 제외        |

### 핵심 발견 요약

1. **배송 관련**: 동일 지역 여부, 배송 시간이 가장 중요
   - 느린 판매자의 29%가 `office_furniture` 판매자 (전체 1.6%)
   - **특정 카테고리가 아닌 판매자 내부 프로세스 문제**
2. **판매 구조**: 상품 수/카테고리 수 많을수록 부정 리뷰 급증!
   - 상품 수 2개+: 약 10% (9,765건) → 경향성 신뢰 가능
   - 카테고리 수 2개+: 약 0.7% (732건) → 소수 샘플 주의
3. **특수 기간**: 블랙프라이데이에 리뷰 품질 급락
4. **제품 정보**: 정보 유무만 중요, 양은 무관
5. **시간 피처**: 요일/시간대는 영향 없음

### 데이터 불균형 주의사항

- 대부분 주문이 단일 상품(90%), 단일 카테고리(98%)
- 복잡한 주문(다품목, 다카테고리)의 샘플 수가 적어 통계적 신뢰도 제한
- ML 모델 적용 시 **클래스 불균형 처리** 방식 고려
  - 예: `is_multi_item` (상품 2개 이상 여부) 로 단순화

---

## 구체화: 유의 판매자 손익 영향 분석

### 1. 모델 개요

**목적**: 유의 판매자(부정 리뷰 유발 판매자)를 식별하고, 이들로 인한 비용/손실을 정량화

**분석 흐름:**

1. EDA 피처 + 실제 매출 데이터 + 비용 파라미터 입력
2. 리뷰 예측 모델로 부정 리뷰 확률 산출
3. 유의 판매자 식별
4. 손익 영향 분석 리포트 출력

### 2. 데이터 구성

#### 2.1 실제 데이터

| 데이터                   | 출처                | 용도           |
| ------------------------ | ------------------- | -------------- |
| `price`                  | olist_order_items   | 상품 가격      |
| `freight_value`          | olist_order_items   | 배송비         |
| `review_score`           | olist_order_reviews | 부정 리뷰 식별 |
| `geolocation` (lat, lng) | olist_geolocation   | ETA 계산용     |

#### 2.2 가정 기반 비용 파라미터 (브라질 경제 데이터)

| 파라미터       | 값          | 근거                                   |
| -------------- | ----------- | -------------------------------------- |
| CS 시급        | R$6.00/시간 | 브라질 CS 평균 (최저시급 R$4.76 + 25%) |
| CS 처리 시간   | 30분/건     | 업계 평균                              |
| 반품 배송비    | R$27.50/건  | 브라질 평균 왕복 배송비                |
| 할인쿠폰 가치  | R$12.00/건  | 평균 주문액의 10%                      |
| 반품 비율      | 40%         | 부정 리뷰 중 반품 요청 비율            |
| 쿠폰 발행 비율 | 20%         | 부정 리뷰 중 쿠폰 발행 비율            |
| 플랫폼 수수료  | 10%         | 이커머스 업계 평균                     |

### 3. 유의 판매자 식별 기준

| 기준           | 임계값  | EDA 근거                  |
| -------------- | ------- | ------------------------- |
| 부정 리뷰 비율 | > 20%   | 평균 14% 대비 높음        |
| 배송 지연률    | > 15%   | 평균 12.1% 대비 높음      |
| 평균 리뷰 점수 | < 3.5점 | 전체 평균 4.0점 대비 낮음 |

### 4. 시나리오 분석

#### 4.1 유의 판매자 제거 시 효과

| 항목           | 계산                       | 데이터 출처 |
| -------------- | -------------------------- | ----------- |
| 절감 CS 비용   | 부정 리뷰 수 × R$3         | 가정        |
| 절감 보상 비용 | 부정 리뷰 수 × 비율 × 단가 | 가정        |
| 손실 수수료    | 유의 판매자 매출 × 10%     | 실제 + 가정 |
| **순 효과**    | 절감 비용 - 손실 수수료    | 혼합        |

### 5. 예상 결과물

- **유의 판매자 현황**: 식별된 유의 판매자 수, 주문 수, 부정 리뷰 비율
- **비용 분석**: 유의 판매자 매출, CS 비용, 보상 비용, 총 비용
- **시나리오 분석**: 제거 시 절감 비용 vs 손실 수수료, 순 효과 |
